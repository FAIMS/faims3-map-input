(this["webpackJsonpfaims3-map-input-example"]=this["webpackJsonpfaims3-map-input-example"]||[]).push([[0],{133:function(e,t,n){e.exports=n(150)},134:function(e,t,n){},139:function(e,t,n){},147:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);n(134);var a=n(0),r=n.n(a),o=n(56),i=n.n(o),c=(n(139),n(81)),l=n(115),u=n(61),m=n(117),s=n(76),f=n(77),p=n(71),d=n(86),v=n(107),g=n(104),y=n(110),E=n(109),b=n(114),w=n(4),S=n(179),j=n(116);var h={mapInputWidget:{position:"absolute",top:0,left:0,height:"100vh",width:"100%",display:"grid",gridTemplateRows:"1fr 100px",zIndex:100},mapContainer:{gridRow:1},mapSubmitButton:{gridRow:2}};function O(e){var t=Object(a.useState)(),n=t[0],o=t[1],i=Object(a.useState)(),c=i[0],O=i[1],P=new j.a,k=Object(a.useRef)(null);Object(a.useRef)().current=n;var G=Object(a.useCallback)((function(e,t){var n=Object(w.o)(t.center,"EPSG:4326","EPSG:3857"),a=new l.a({target:e,layers:[new m.a({source:new b.a})],view:new u.a({projection:"EPSG:3857",center:n,zoom:t.zoom}),controls:[]});return a.getView().setCenter(n),a}),[]),T=Object(a.useCallback)((function(e,t){var n=new f.a,a=new s.a({source:n,style:new p.c({stroke:new d.a({color:"#33ff33",width:4}),image:new v.a({radius:7,fill:new g.a({color:"#33ff33"})})})}),r=new y.a({source:n,type:t.featureType||"Point"}),o=new E.a({source:n});if(t.features&&t.features.type){var i=P.readFeatures(t.features,{dataProjection:"EPSG:4326",featureProjection:e.getView().getProjection()});n.addFeatures(i)}e.addLayer(a),e.addInteraction(r),e.addInteraction(o),O(a),r.on("drawstart",(function(){n.clear()}))}),[O]);Object(a.useEffect)((function(){if(!n&&k.current){var t=G(k.current,e);T(t,e),o(t)}}),[n,G,T,e]);return r.a.createElement("div",{style:h.mapInputWidget},r.a.createElement("div",{ref:k,style:h.mapContainer}),r.a.createElement(S.a,{type:"button",variant:"outlined",color:"primary",style:h.mapSubmitButton,onClick:function(){if(c){var t=c.getSource().getFeatures();if(n){var a=[];t.forEach((function(e){var t=e.getGeometry().clone().transform(n.getView().getProjection(),"EPSG:4326");console.log(e.getGeometry().flatCoordinates,t.flatCoordinates);var r=e.clone();r.setGeometry(t),a.push(r)}));var r=P.writeFeaturesObject(a,{dataProjection:"EPSG:4326",rightHanded:!0});e.callbackFn(r),c.getSource().clear()}}}},"Submit"))}var P=["field","form"];function k(e){var t=e.field,n=e.form,o=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,P),i=Object(a.useState)(!1),c=i[0],l=i[1],u=Object(a.useState)([]),m=u[0],s=u[1],f=12,p=[151.11224773567673,-33.773807355279104];o.zoom&&(f=o.zoom),o.center&&(p=o.center);return c?(window.scrollTo(0,0),r.a.createElement("div",null,r.a.createElement(O,{featureType:o.featureType,features:m,zoom:f,center:p,callbackFn:function(e){s(e),l(!1),n.setFieldValue(t.name,e)}}))):r.a.createElement("div",null,r.a.createElement(S.a,{variant:"contained",className:"map-button",onClick:function(){return l(!0)}},"Get ",o.featureType))}var G=n(180),T=(n(147),function(){var e=[151.21409960967713,-33.85543752567224];return r.a.createElement(c.c,{initialValues:{point:{},polygon:{},linestring:{}},onSubmit:function(e,t){console.log(e),t.setSubmitting(!1)}},(function(t){return r.a.createElement("div",{id:"demoformcontainer"},r.a.createElement("div",{id:"theform"},r.a.createElement("h1",null,"Test Form"),r.a.createElement(c.b,null,r.a.createElement(c.a,{name:"point",center:e,featureType:"Point",component:k}),r.a.createElement(c.a,{name:"polygon",zoom:10,featureType:"Polygon",component:k}),r.a.createElement(c.a,{name:"linestring",featureType:"LineString",component:k}),r.a.createElement(G.a,{variant:"contained",color:"primary",type:"submit"},"Submit"))),r.a.createElement("div",{id:"formvaluedisplay"},r.a.createElement("pre",null,JSON.stringify(t.values,null,2))))}))});var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(T,null))};i.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.40da70cd.chunk.js.map