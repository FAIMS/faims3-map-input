(this["webpackJsonpfaims3-map-input-example"]=this["webpackJsonpfaims3-map-input-example"]||[]).push([[0],{139:function(e,t,n){},144:function(e,t,n){},152:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);n(139);var r=n(0),a=n(57),i=n.n(a),o=(n(144),n(82)),c=n(83),s=n(23),u=n(121),l=n(62),d=n(123),j=n(77),f=n(78),b=n(72),m=n(89),p=n(111),O=n(107),v=n(114),g=n(113),h=n(120),y=n(4),x=n(184),w=n(122),S=n(119);var P={mapInputWidget:{position:"absolute",top:0,left:0,height:"100vh",width:"100%",display:"grid",gridTemplateRows:"1fr 100px",zIndex:100},mapContainer:{gridRow:1},mapSubmitButton:{gridRow:2}};function k(e){var t=Object(r.useState)(),n=Object(c.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(),S=Object(c.a)(o,2),k=S[0],z=S[1],E=new w.a,G=Object(r.useRef)(null);Object(r.useRef)().current=a;var T=Object(r.useCallback)((function(e,t){var n="EPSG:3857",r=Object(y.o)(t.center,"EPSG:4326",n),a=new u.a({target:e,layers:[new d.a({source:new h.a})],view:new l.a({projection:n,center:r,zoom:t.zoom}),controls:[]});return a.getView().setCenter(r),a}),[]),C=Object(r.useCallback)((function(e,t){var n=new f.a,r=new j.a({source:n,style:new b.c({stroke:new m.a({color:"#33ff33",width:4}),image:new p.a({radius:7,fill:new O.a({color:"#33ff33"})})})}),a=new v.a({source:n,type:t.featureType||"Point"}),i=new g.a({source:n});if(t.features&&t.features.type){var o=E.readFeatures(t.features,{dataProjection:"EPSG:4326",featureProjection:e.getView().getProjection()});n.addFeatures(o);var c=n.getExtent();c.includes(1/0)||e.getView().fit(c,{padding:[20,20,20,20],maxZoom:t.zoom})}e.addLayer(r),e.addInteraction(a),e.addInteraction(i),z(r),a.on("drawstart",(function(){n.clear()}))}),[z]);Object(r.useEffect)((function(){if(!a&&G.current){var t=T(G.current,e);C(t,e),i(t)}}),[a,T,C,e]);return Object(s.jsxs)("div",Object.assign({style:P.mapInputWidget},{children:[Object(s.jsx)("div",{ref:G,style:P.mapContainer},void 0),Object(s.jsx)(x.a,Object.assign({type:"button",variant:"outlined",color:"primary",style:P.mapSubmitButton,onClick:function(){if(k){var t=k.getSource().getFeatures();if(a){var n=[];t.forEach((function(e){var t=e.getGeometry().clone().transform(a.getView().getProjection(),"EPSG:4326"),r=e.clone();r.setGeometry(t),n.push(r)}));var r=E.writeFeaturesObject(n,{dataProjection:"EPSG:4326",rightHanded:!0});e.callbackFn(r),k.getSource().clear()}}}},{children:"Submit"}),void 0)]}),void 0)}var z=["field","form"],E=S.a.Geolocation;function G(e){var t=e.field,n=e.form,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,z),i=Object(r.useState)(!1),o=Object(c.a)(i,2),u=o[0],l=o[1],d=Object(r.useState)([]),j=Object(c.a)(d,2),f=j[0],b=j[1];a.center||(a.center=[0,0]);var m=Object(r.useState)(a.center),p=Object(c.a)(m,2),O=p[0],v=p[1];a.zoom||(a.zoom=14);return u&&0===O[0]&&0===O[1]&&E.getCurrentPosition().then((function(e){v([e.coords.longitude,e.coords.latitude])})),u&&0!==O[0]&&0!==O[1]?Object(s.jsx)("div",{children:Object(s.jsx)(k,{featureType:a.featureType,features:f,zoom:a.zoom,center:O,callbackFn:function(e){b(e),l(!1),n.setFieldValue(t.name,e)}},void 0)},void 0):Object(s.jsx)("div",{children:Object(s.jsxs)(x.a,Object.assign({variant:"contained",className:"map-button",onClick:function(){return l(!0)}},{children:["Get ",a.featureType]}),void 0)},void 0)}var T=n(185),C=(n(152),function(){var e=[151.21409960967713,-33.85543752567224];return Object(s.jsx)(o.c,{initialValues:{point:{},polygon:{},linestring:{}},onSubmit:function(e,t){console.log(e),t.setSubmitting(!1)},children:function(t){return Object(s.jsxs)("div",{id:"demoformcontainer",children:[Object(s.jsxs)("div",{id:"theform",children:[Object(s.jsx)("h1",{children:"Test Form"}),Object(s.jsxs)(o.b,{children:[Object(s.jsx)(o.a,{name:"point",center:e,featureType:"Point",component:G}),Object(s.jsx)(o.a,{name:"polygon",zoom:10,featureType:"Polygon",component:G}),Object(s.jsx)(o.a,{name:"linestring",featureType:"LineString",component:G}),Object(s.jsx)(T.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})]})]}),Object(s.jsx)("div",{id:"formvaluedisplay",children:Object(s.jsx)("pre",{children:JSON.stringify(t.values,null,2)})})]})}})});var F=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(C,{})})};i.a.render(Object(s.jsx)(F,{}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.bd27b360.chunk.js.map